function g(){const a=document.querySelector("[data-settings-tab]"),l=document.querySelector("[data-settings-toggle]"),s=document.querySelector("[data-settings-expanded]");if(!a)return;let n=!1,i=null;const r=()=>{i&&clearTimeout(i),i=setTimeout(()=>{n||(s?.classList.add("exiting"),setTimeout(()=>{s?.classList.remove("show"),s?.classList.remove("exiting")},600))},1800)},e=()=>{i&&(clearTimeout(i),i=null)},t=()=>{n=!n,n?(s?.classList.add("show"),l?.classList.add("active")):(s?.classList.add("exiting"),l?.classList.remove("active"),setTimeout(()=>{s?.classList.remove("show"),s?.classList.remove("exiting")},600))};l?.addEventListener("click",c=>{c.stopPropagation(),t()}),l?.addEventListener("mouseenter",()=>{e(),n||s?.classList.add("show")}),a?.addEventListener("mouseenter",()=>{e()}),a?.addEventListener("mouseleave",()=>{n||r()}),document.addEventListener("click",c=>{n&&!a.contains(c.target)&&(n=!1,s?.classList.remove("show"),l?.classList.remove("active"))});const o=()=>{const c=a.querySelector('[data-action="scroll-top"]'),u=window.scrollY||document.documentElement.scrollTop;if(c){const d=c;u>200?(d.style.opacity="1",d.style.pointerEvents="auto"):(d.style.opacity="0.5",d.style.pointerEvents="none")}};return o(),window.addEventListener("scroll",o,{passive:!0}),{toggleSettings:t,cancelAutoCollapse:e}}function m(){const a=()=>{const e=document.getElementById("bottomNavDarkMode");if(e){const t=e.querySelector(".moon-icon"),o=e.querySelector(".sun-icon");document.body.classList.contains("accessibility-dark-mode")?(t.style.display="none",o.style.display="block",e.setAttribute("aria-label","Switch to light mode")):(t.style.display="block",o.style.display="none",e.setAttribute("aria-label","Switch to dark mode"))}};setTimeout(()=>{a()},100),window.updateBottomNavDarkModeIcon=a;const l=e=>{const t=document.querySelector(`[data-overlay-screen="${e}"]`);if(t){t.classList.add("show"),document.body.style.overflow="hidden";const o=document.querySelector("[data-settings-expanded]"),c=document.querySelector("[data-settings-toggle]");o?.classList.remove("show"),c?.classList.remove("active")}},s=e=>{const t=document.querySelector(`[data-overlay-screen="${e}"]`);t&&(t.classList.remove("show"),document.body.style.overflow="")},n=()=>{document.querySelectorAll(".overlay-screen").forEach(e=>{e.classList.remove("show")}),document.body.style.overflow=""},i=e=>{switch(e){case"home":window.location.href="/";break;case"scroll-top":document.documentElement.scrollTo({top:0,behavior:"smooth"}),window.scrollTo&&window.scrollTo({top:0,behavior:"smooth"});break;case"contact":if(window.openContactPopup){window.openContactPopup();const t=document.querySelector("[data-settings-expanded]"),o=document.querySelector("[data-settings-toggle]");t?.classList.remove("show"),o?.classList.remove("active")}break;case"search":if(window.openSearchPopup){window.openSearchPopup();const t=document.querySelector("[data-settings-expanded]"),o=document.querySelector("[data-settings-toggle]");t?.classList.remove("show"),o?.classList.remove("active")}break;case"dark-mode":if(window.accessibilityPanelInstance&&window.accessibilityPanelInstance.toggleDarkMode){window.accessibilityPanelInstance.toggleDarkMode(),a();const t=document.querySelector("[data-settings-expanded]"),o=document.querySelector("[data-settings-toggle]");t?.classList.remove("show"),o?.classList.remove("active")}else console.warn("Accessibility Panel not available yet");break;case"accessibility":window.location.href="/accessibility";break}},r=document.querySelector("[data-settings-tab]");return r&&r.addEventListener("click",e=>{const t=e.target&&e.target.closest("[data-action]");if(!t)return;const o=t.dataset.action;i(o)}),document.querySelectorAll("[data-overlay-close]").forEach(e=>{e.addEventListener("click",t=>{const o=e.getAttribute("data-overlay-close");typeof o=="string"&&s(o)})}),document.querySelectorAll("[data-overlay-backdrop]").forEach(e=>{e.addEventListener("click",t=>{const o=e.getAttribute("data-overlay-backdrop");typeof o=="string"&&s(o)})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&n()}),{openOverlay:l,closeOverlay:s,closeAllOverlays:n}}function y(){g(),m()}y();
