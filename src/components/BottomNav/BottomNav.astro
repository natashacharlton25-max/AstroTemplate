---
// Bottom Navigation Component
---

<!-- Settings Tab -->
<div class="settings-tab" data-settings-tab>
  <!-- Expanded Settings Menu -->
  <div class="settings-expanded" data-settings-expanded>
    <!-- Contact -->
    <button class="settings-item" data-action="contact" aria-label="Contact">
      <svg class="settings-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
      </svg>
    </button>
    
    <!-- Home -->
    <button class="settings-item" data-action="home" aria-label="Home">
      <svg class="settings-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
      </svg>
    </button>
    
    <!-- Scroll to Top -->
    <button class="settings-item" data-action="scroll-top" aria-label="Scroll to top">
      <svg class="settings-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
      </svg>
    </button>
    
    <!-- Search -->
    <button class="settings-item" data-action="search" aria-label="Search">
      <svg class="settings-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <circle cx="11" cy="11" r="8"></circle>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-4.35-4.35"></path>
      </svg>
    </button>
    
    <!-- Accessibility -->
    <button class="settings-item" data-action="accessibility" aria-label="Accessibility Settings">
      <svg class="settings-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10"></circle>
        <circle cx="12" cy="8" r="2"></circle>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14v6M8 18h8"></path>
      </svg>
    </button>
    
  </div>
  
  <!-- Plus Icon Tab -->
  <button class="settings-toggle" data-settings-toggle aria-label="Navigation Menu">
    <svg class="settings-plus" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
    </svg>
  </button>
</div>

<!-- Overlay Screens -->
<!-- Email/Contact Overlay -->
<div class="overlay-screen" data-overlay-screen="email">
  <div class="overlay-backdrop" data-overlay-backdrop="email"></div>
  <div class="overlay-content" data-overlay-content="email">
    <div class="overlay-header">
      <div class="overlay-logo">
        <img src="/images/Logo-Text.svg" alt="IC the Moon" class="overlay-logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'" />
        <span class="overlay-logo-text" style="display:none">IC</span>
      </div>
      <button class="overlay-close" data-overlay-close="email" aria-label="Close">
        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div class="overlay-body">
      <!-- Greeting Section -->
      <div class="contact-greeting">
        <h2 class="overlay-title">Get In Touch</h2>
        <p class="contact-subtitle">We'd love to hear from you! Whether you have a question, feedback, or just want to say hello, drop us a message.</p>
      </div>

      <!-- Contact Form -->
      <form class="contact-form" data-contact-form>
        <div class="form-group">
          <label for="contact-name" class="form-label">Name *</label>
          <input type="text" id="contact-name" name="name" class="form-input" required>
        </div>

        <div class="form-group">
          <label for="contact-email" class="form-label">Email Address *</label>
          <input type="email" id="contact-email" name="email" class="form-input" required>
        </div>

        <div class="form-group">
          <label for="contact-subject" class="form-label">Subject</label>
          <input type="text" id="contact-subject" name="subject" class="form-input">
        </div>

        <!-- Page-Specific Option -->
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="page-specific" class="form-checkbox" data-page-specific>
            <label for="page-specific" class="checkbox-label">
              <span class="checkbox-text">This message is about the current page</span>
              <span class="page-indicator" data-current-page></span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label for="contact-message" class="form-label">Message *</label>
          <textarea id="contact-message" name="message" class="form-textarea" rows="4" required placeholder="Tell us what's on your mind..."></textarea>
        </div>

        <button type="submit" class="contact-submit-btn">
          <svg class="submit-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
          </svg>
          Send Message
        </button>
      </form>

      <!-- Contact Details -->
      <div class="contact-details">
        <h3 class="contact-details-title">Other Ways to Reach Us</h3>
        <div class="contact-info-grid">
          <div class="contact-info-item">
            <svg class="contact-icon" width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
            </svg>
            <div class="contact-info-text">
              <span class="contact-label">Email</span>
              <a href="mailto:hello@example.com" class="contact-value">hello@example.com</a>
            </div>
          </div>
          
          <div class="contact-info-item">
            <svg class="contact-icon" width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
            </svg>
            <div class="contact-info-text">
              <span class="contact-label">Phone</span>
              <a href="tel:+1234567890" class="contact-value">+1 (234) 567-890</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Accessibility Overlay -->
<div class="overlay-screen" data-overlay-screen="accessibility">
  <div class="overlay-backdrop" data-overlay-backdrop="accessibility"></div>
  <div class="overlay-content" data-overlay-content="accessibility">
    <div class="overlay-header">
      <div class="overlay-logo">
        <img src="/images/Logo-Text.svg" alt="IC the Moon" class="overlay-logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'" />
        <span class="overlay-logo-text" style="display:none">IC</span>
      </div>
      <button class="overlay-close" data-overlay-close="accessibility" aria-label="Close">
        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div class="overlay-body">
      <h2 class="overlay-title">Accessibility Settings</h2>
      <p class="overlay-placeholder">Accessibility controls will go here...</p>
    </div>
  </div>
</div>

<!-- Search Overlay -->
<div class="overlay-screen" data-overlay-screen="search">
  <div class="overlay-backdrop" data-overlay-backdrop="search"></div>
  <div class="overlay-content" data-overlay-content="search">
    <div class="overlay-header">
      <div class="overlay-logo">
        <img src="/images/Logo-Text.svg" alt="IC the Moon" class="overlay-logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'" />
        <span class="overlay-logo-text" style="display:none">IC</span>
      </div>
      <button class="overlay-close" data-overlay-close="search" aria-label="Close">
        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div class="overlay-body">
      <h2 class="overlay-title">Search</h2>
      <p class="overlay-placeholder">Search functionality will go here...</p>
    </div>
  </div>
</div>

<style>
  /* Settings Tab - Positioned 3/4 down page, partially off-screen */
  .settings-tab {
    position: fixed !important;
    top: 85vh !important; /* Moved lower - 85% down the page */
    right: -20px !important; /* Partially off-screen */
    z-index: 999 !important;
    display: block !important; /* Simple block layout */
    pointer-events: auto !important;
    /* Ensure visibility */
    opacity: 1 !important;
    visibility: visible !important;
  }
  
  .settings-toggle {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important; /* Match settings-item alignment */
    width: 72px !important; /* Match settings-item width */
    height: 48px !important; /* Reduced height for better fit */ /* Match settings-item height */
    background: #fffaf6 !important; /* Cream background */
    border: 1px solid rgba(184, 186, 190, 0.4) !important; /* Subtle border */
    border-radius: 28px 0 0 28px !important; /* Match settings-item border-radius */
    box-shadow: -4px 0 16px rgba(0, 0, 0, 0.1) !important;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    cursor: pointer !important;
    color: #184e77 !important; /* Blue text */
    border-right: none !important; /* No right border since it's off-screen */
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    /* Ensure visibility */
    opacity: 1 !important;
    visibility: visible !important;
    position: relative !important;
    margin: 0 !important;
    padding: 0 20px 0 16px !important; /* Match settings-item padding */
  }
  
  .settings-plus {
    width: 20px !important;
    height: 20px !important;
    stroke-width: 2.5 !important;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    color: inherit !important;
  }
  
  .settings-toggle:hover,
  .settings-toggle.active {
    transform: translateX(-10px) !important; /* Pull into view slightly */
    background: #e63961 !important; /* Red background */
    color: #ffffff !important; /* White text */
    box-shadow: -8px 0 24px rgba(230, 57, 97, 0.3) !important;
  }
  
  .settings-toggle.active .settings-plus {
    transform: rotate(45deg);
  }
  
  .settings-plus {
    width: 20px;
    height: 20px;
    stroke-width: 2.5;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Expanded Settings Menu - Positioned absolutely above the tab */
  .settings-expanded {
    position: absolute !important;
    bottom: 64px !important; /* Match tab height (48px) + gap (16px) for equal spacing */
    right: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 16px !important; /* More space between tabs */
    opacity: 0 !important;
    transform: translateY(20px) scale(0.9) !important;
    transform-origin: bottom right !important; /* Ensure it expands from bottom-right corner */
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
    pointer-events: none !important;
    /* Ensure it doesn't get cut off */
    max-height: 400px !important;
    overflow: visible !important;
    z-index: 1001 !important; /* Higher z-index than the tab */
  }
  
  .settings-expanded.show {
    opacity: 1 !important;
    transform: translateY(0) scale(1) !important;
    transform-origin: bottom right !important;
    pointer-events: auto !important;
  }
  
  /* Staggered animation for individual tabs when expanded - glide in from right */
  .settings-expanded.show .settings-item {
    opacity: 1 !important;
    transform: translateX(0) scale(1) !important; /* Slide to normal position */
  }
  
  /* Individual animation delays for staggered glide effect - bottom to top */
  .settings-expanded.show .settings-item:nth-child(1) {
    transition-delay: 0.45s !important; /* Contact - last to glide in (top) */
  }
  
  .settings-expanded.show .settings-item:nth-child(2) {
    transition-delay: 0.35s !important; /* Home */
  }
  
  .settings-expanded.show .settings-item:nth-child(3) {
    transition-delay: 0.25s !important; /* Scroll to top */
  }
  
  .settings-expanded.show .settings-item:nth-child(4) {
    transition-delay: 0.15s !important; /* Search */
  }
  
  .settings-expanded.show .settings-item:nth-child(5) {
    transition-delay: 0.05s !important; /* Accessibility - first to glide in (bottom) */
  }
  
  /* Exit animation states - glide back to right */
  .settings-expanded.exiting .settings-item {
    opacity: 0 !important;
    transform: translateX(50px) scale(0.9) !important; /* Glide back to right */
  }
  
  /* Staggered disappear animation - reverse order (top to bottom) */
  .settings-expanded.exiting .settings-item:nth-child(1) {
    transition-delay: 0.05s !important; /* Contact - first to disappear (top) */
  }
  
  .settings-expanded.exiting .settings-item:nth-child(2) {
    transition-delay: 0.15s !important; /* Home */
  }
  
  .settings-expanded.exiting .settings-item:nth-child(3) {
    transition-delay: 0.25s !important; /* Scroll to top */
  }
  
  .settings-expanded.exiting .settings-item:nth-child(4) {
    transition-delay: 0.35s !important; /* Search */
  }
  
  .settings-expanded.exiting .settings-item:nth-child(5) {
    transition-delay: 0.45s !important; /* Accessibility - last to disappear (bottom) */
  }
  
  .settings-item {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important; /* Align icons to the left */
    width: 72px !important; /* Wider tabs */
    height: 48px !important; /* Reduced height for better fit */
    background: #fffaf6 !important;
    border: 1px solid rgba(184, 186, 190, 0.4) !important;
    border-radius: 28px 0 0 28px !important; /* Match tab shape but larger */
    border-right: none !important;
    box-shadow: -4px 0 16px rgba(0, 0, 0, 0.08) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    cursor: pointer !important;
    transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Faster transitions for hover switching */
    color: #184e77 !important;
    position: relative !important;
    padding: 0 20px 0 16px !important; /* Less left padding, more right padding */
    /* Initial/hidden state - tabs start and return to right side */
    opacity: 0 !important;
    transform: translateX(50px) scale(0.9) !important;
  }
  
  .settings-expanded.show .settings-item:hover {
    transform: translateX(-12px) scale(1) !important; /* Maintain scale while translating */
    background: #e63961 !important;
    color: #ffffff !important;
    box-shadow: -12px 0 24px rgba(230, 57, 97, 0.3) !important;
    transition-delay: 0s !important; /* Remove delay for immediate hover response */
  }
  
  .settings-icon {
    width: 22px !important;
    height: 22px !important;
    stroke-width: 2.5 !important;
  }
  
  /* Mobile adjustments */
  @media (max-width: 768px) {
    .settings-tab {
      top: 70vh; /* Slightly higher on mobile */
      right: -15px;
    }
    
    .settings-toggle {
      width: 60px; /* Slightly wider for mobile */
      height: 40px; /* Reduced height for mobile */
    }
    
    .settings-plus {
      width: 18px;
      height: 18px;
    }
    
    .settings-item {
      width: 60px; /* Wider for mobile */
      height: 40px; /* Reduced height for mobile */
    }
    
    .settings-icon {
      width: 20px;
      height: 20px;
    }
  }
  
  /* Overlay Screens */
  .overlay-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    pointer-events: none;
  }
  
  .overlay-screen.show {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }
  
  /* Overlay Backdrop - Grey background for mobile only */
  .overlay-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6); /* Grey background for mobile */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  
  /* Mobile: Rounded rectangle container with padding */
  .overlay-content {
    position: absolute;
    top: 24px; /* Top padding */
    left: 16px; /* Left padding */
    right: 16px; /* Right padding */
    bottom: 24px; /* Bottom padding */
    background: var(--brand-background); /* Proper brand background color */
    border: 1px solid var(--nav-border);
    border-radius: var(--nav-border-radius) !important; /* Force all corners rounded */
    box-shadow: 0 32px 64px -12px rgba(0, 0, 0, 0.4), 0 8px 32px -8px rgba(0, 0, 0, 0.3); /* More pronounced shadow */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    display: flex;
    flex-direction: column;
    z-index: 1;
    transform: translateX(100%); /* Start from right */
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Same as tab animation */
    overflow: hidden; /* Ensure children respect border-radius */
  }
  
  .overlay-screen.show .overlay-content {
    transform: translateX(0);
  }
  
  /* Overlay Header - Pinned at top */
  .overlay-header {
    position: sticky;
    top: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    background: color-mix(in srgb, var(--brand-background) 90%, transparent);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--nav-border);
    z-index: 10;
    /* Ensure top corners stay rounded */
    border-top-left-radius: var(--nav-border-radius);
    border-top-right-radius: var(--nav-border-radius);
  }
  
  /* Logo in overlay header */
  .overlay-logo {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .overlay-logo-img {
    height: 32px;
    width: auto;
  }
  
  .overlay-logo-text {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--brand-primary); /* Brand primary for logo */
  }
  
  /* Close button */
  .overlay-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: transparent;
    border: 1px solid var(--nav-border);
    border-radius: 12px;
    color: var(--nav-text-primary);
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .overlay-close:hover {
    background: var(--nav-hover-bg);
    color: var(--nav-text-accent);
    transform: scale(1.05);
  }
  
  /* Overlay Body */
  .overlay-body {
    flex: 1;
    padding: 32px 24px;
    overflow-y: auto;
  }
  
  .overlay-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--nav-text-primary);
    margin: 0 0 24px 0;
  }
  
  .overlay-placeholder {
    color: var(--nav-text-primary);
    opacity: 0.8;
    font-size: 1rem;
    line-height: 1.6;
    margin: 0;
  }
  
  /* Desktop: Half-height overlay that glides from right, no background */
  @media (min-width: 768px) {
    .overlay-backdrop {
      display: none; /* Remove grey background for desktop */
    }
    
    .overlay-content {
      top: 50%;
      left: 32px; /* Left padding */
      right: 32px; /* Right padding */  
      bottom: auto;
      width: auto;
      height: 50%; /* Half height */
      max-width: none;
      background: var(--brand-background); /* Proper brand background color */
      border: 1px solid var(--nav-border);
      box-shadow: 0 32px 64px -12px rgba(0, 0, 0, 0.4), 0 8px 32px -8px rgba(0, 0, 0, 0.3); /* More pronounced shadow */
      transform: translateX(100%) translateY(-50%); /* Start from right, centered vertically */
    }
    
    .overlay-screen.show .overlay-content {
      transform: translateX(0) translateY(-50%); /* Slide to normal position from right */
    }
    
    .overlay-header {
      position: static;
      background: transparent;
      border-bottom: 1px solid color-mix(in srgb, var(--nav-border) 60%, transparent);
      padding: 24px 32px 20px 32px;
    }
    
    .overlay-logo-img {
      height: 36px;
    }
    
    .overlay-body {
      padding: 20px 32px 32px 32px;
    }
    
    .overlay-title {
      font-size: 2rem;
    }
  }
  
  @media (min-width: 1024px) {
    .overlay-content {
      left: 64px; /* More padding on larger screens */
      right: 64px;
    }
    
    .overlay-header {
      padding: 32px 48px 24px 48px;
    }
    
    .overlay-body {
      padding: 24px 48px 48px 48px;
    }
    
    .overlay-logo-img {
      height: 40px;
    }
    
    .overlay-title {
      font-size: 2.25rem;
    }
  }
  
  /* Contact Form Styles */
  .contact-greeting {
    margin-bottom: 32px;
    text-align: center;
  }
  
  .contact-subtitle {
    color: var(--nav-text-primary);
    opacity: 0.8;
    font-size: 1rem;
    line-height: 1.6;
    margin: 16px 0 0 0;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }
  
  .contact-form {
    margin-bottom: 40px;
  }
  
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-label {
    display: block;
    color: var(--nav-text-primary);
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 8px;
  }
  
  .form-input,
  .form-textarea {
    width: 100%;
    padding: 12px 16px;
    background: color-mix(in srgb, var(--brand-background) 90%, transparent);
    border: 1px solid var(--nav-border);
    border-radius: calc(var(--nav-border-radius) * 0.6);
    color: var(--nav-text-primary);
    font-size: 0.875rem;
    transition: all 0.3s ease;
    font-family: inherit;
  }
  
  .form-input:focus,
  .form-textarea:focus {
    outline: none;
    border-color: var(--brand-primary);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand-primary) 20%, transparent);
  }
  
  .form-textarea {
    resize: vertical;
    min-height: 100px;
  }
  
  /* Checkbox Group */
  .checkbox-group {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    background: color-mix(in srgb, var(--brand-primary) 10%, transparent);
    border: 1px solid color-mix(in srgb, var(--brand-primary) 30%, transparent);
    border-radius: calc(var(--nav-border-radius) * 0.6);
    transition: all 0.3s ease;
  }
  
  .form-checkbox {
    width: 18px;
    height: 18px;
    margin: 0;
    accent-color: var(--brand-primary);
    cursor: pointer;
  }
  
  .checkbox-label {
    flex: 1;
    cursor: pointer;
    font-size: 0.875rem;
    line-height: 1.4;
  }
  
  .checkbox-text {
    display: block;
    color: var(--nav-text-primary);
    margin-bottom: 4px;
  }
  
  .page-indicator {
    display: inline-block;
    background: var(--brand-primary);
    color: white;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
  }
  
  /* Submit Button */
  .contact-submit-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: 100%;
    padding: 14px 24px;
    background: var(--brand-primary);
    color: white;
    border: none;
    border-radius: calc(var(--nav-border-radius) * 0.6);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .contact-submit-btn:hover {
    background: color-mix(in srgb, var(--brand-primary) 90%, black);
    transform: translateY(-2px);
    box-shadow: 0 8px 16px color-mix(in srgb, var(--brand-primary) 40%, transparent);
  }
  
  .submit-icon {
    transition: transform 0.3s ease;
  }
  
  .contact-submit-btn:hover .submit-icon {
    transform: translateX(2px);
  }
  
  /* Contact Details */
  .contact-details {
    padding-top: 32px;
    border-top: 1px solid var(--nav-border);
  }
  
  .contact-details-title {
    color: var(--nav-text-primary);
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0 0 20px 0;
    text-align: center;
  }
  
  .contact-info-grid {
    display: grid;
    gap: 16px;
  }
  
  .contact-info-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: color-mix(in srgb, var(--brand-background) 95%, transparent);
    border: 1px solid var(--nav-border);
    border-radius: calc(var(--nav-border-radius) * 0.6);
    transition: all 0.3s ease;
  }
  
  .contact-info-item:hover {
    background: color-mix(in srgb, var(--brand-background) 90%, transparent);
    border-color: color-mix(in srgb, var(--brand-primary) 50%, transparent);
    transform: translateY(-2px);
  }
  
  .contact-icon {
    opacity: 0.7;
    flex-shrink: 0;
  }
  
  .contact-info-text {
    flex: 1;
  }
  
  .contact-label {
    display: block;
    color: var(--nav-text-primary);
    font-size: 0.75rem;
    font-weight: 500;
    opacity: 0.7;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 2px;
  }
  
  .contact-value {
    display: block;
    color: var(--nav-text-primary);
    font-size: 0.875rem;
    text-decoration: none;
    transition: color 0.3s ease;
  }
  
  .contact-value:hover {
    color: var(--brand-primary);
  }
  
  @media (min-width: 768px) {
    .contact-info-grid {
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .contact-subtitle {
      font-size: 1.125rem;
    }
  }
</style>

<script>
  function initBottomNav() {
    const settingsTab = document.querySelector('[data-settings-tab]');
    const settingsToggle = document.querySelector('[data-settings-toggle]');
    const settingsExpanded = document.querySelector('[data-settings-expanded]');
    
    if (!settingsTab) return;
    
    let isSettingsExpanded = false;
    let hoverTimer = null;
    
    // Auto-collapse function with delay
    const scheduleAutoCollapse = () => {
      if (hoverTimer) clearTimeout(hoverTimer);
      hoverTimer = setTimeout(() => {
        if (!isSettingsExpanded) {
          // Add exit class for staggered exit animation
          settingsExpanded?.classList.add('exiting');
          setTimeout(() => {
            settingsExpanded?.classList.remove('show');
            settingsExpanded?.classList.remove('exiting');
          }, 600);
        }
      }, 1800); // 1.8 second delay
    };
    
    const cancelAutoCollapse = () => {
      if (hoverTimer) {
        clearTimeout(hoverTimer);
        hoverTimer = null;
      }
    };
    
    // Overlay management functions
    const openOverlay = (type) => {
      const overlay = document.querySelector(`[data-overlay-screen="${type}"]`);
      if (overlay) {
        overlay.classList.add('show');
        document.body.style.overflow = 'hidden';
        
        // Close settings menu when opening overlay
        isSettingsExpanded = false;
        settingsExpanded?.classList.remove('show');
        settingsToggle?.classList.remove('active');
        cancelAutoCollapse();
      }
    };
    
    const closeOverlay = (type) => {
      const overlay = document.querySelector(`[data-overlay-screen="${type}"]`);
      if (overlay) {
        overlay.classList.remove('show');
        document.body.style.overflow = '';
      }
    };
    
    const closeAllOverlays = () => {
      document.querySelectorAll('.overlay-screen').forEach(overlay => {
        overlay.classList.remove('show');
      });
      document.body.style.overflow = '';
    };
    
    // Toggle settings menu
    const toggleSettings = () => {
      isSettingsExpanded = !isSettingsExpanded;
      
      if (isSettingsExpanded) {
        settingsExpanded?.classList.add('show');
        settingsToggle?.classList.add('active');
      } else {
        // Add exit class for staggered exit animation
        settingsExpanded?.classList.add('exiting');
        settingsToggle?.classList.remove('active');
        
        // Remove show class after a brief delay to allow exit animation
        setTimeout(() => {
          settingsExpanded?.classList.remove('show');
          settingsExpanded?.classList.remove('exiting');
        }, 600); // Wait for staggered animation to complete
      }
    };
    
    // Handle settings toggle click and hover
    settingsToggle?.addEventListener('click', (e) => {
      e.stopPropagation();
      toggleSettings();
    });
    
    settingsToggle?.addEventListener('mouseenter', () => {
      cancelAutoCollapse();
      if (!isSettingsExpanded) {
        settingsExpanded?.classList.add('show');
      }
    });
    
    settingsTab?.addEventListener('mouseenter', () => {
      cancelAutoCollapse();
    });
    
    settingsTab?.addEventListener('mouseleave', () => {
      if (!isSettingsExpanded) {
        scheduleAutoCollapse(); // Start 1.8 second timer
      }
    });
    
    // Close settings when clicking outside
    document.addEventListener('click', (e) => {
      if (isSettingsExpanded && !settingsTab.contains(e.target)) {
        isSettingsExpanded = false;
        settingsExpanded?.classList.remove('show');
        settingsToggle?.classList.remove('active');
      }
    });
    
    // Handle button clicks
    settingsTab.addEventListener('click', (e) => {
      const button = e.target.closest('[data-action]');
      if (!button) return;
      
      const action = button.dataset.action;
      
      switch (action) {
        case 'home':
          window.location.href = '/';
          break;
          
        case 'scroll-top':
          document.documentElement.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
          // Fallback for older browsers
          if (window.scrollTo) {
            window.scrollTo({
              top: 0,
              behavior: 'smooth'
            });
          }
          break;
          
        case 'contact':
          // Open email/contact overlay
          openOverlay('email');
          break;
          
        case 'search':
          // Open search overlay
          openOverlay('search');
          break;
          
        case 'accessibility':
          // Open accessibility overlay (screen instead of sidebar)
          openOverlay('accessibility');
          break;
          
      }
    });
    
    // Show/hide scroll-to-top button based on scroll position
    let lastScrollTop = 0;
    const handleScroll = () => {
      const scrollTopBtn = settingsTab.querySelector('[data-action="scroll-top"]');
      const scrollTop = window.scrollY || document.documentElement.scrollTop;
      if (scrollTopBtn) {
        const btn = scrollTopBtn as HTMLElement;
        if (scrollTop > 200) {
          btn.style.opacity = '1';
          btn.style.pointerEvents = 'auto';
        } else {
          btn.style.opacity = '0.5';
          btn.style.pointerEvents = 'none';
        }
      }
      lastScrollTop = scrollTop;
    };
    
    // Initial scroll check
    handleScroll();
    
    // Listen for scroll events
    window.addEventListener('scroll', handleScroll, { passive: true });
    
    // Initialize contact form functionality
    initContactForm();
    
    // Overlay event listeners
    document.querySelectorAll('[data-overlay-close]').forEach(closeBtn => {
      closeBtn.addEventListener('click', (e) => {
        const type = closeBtn.getAttribute('data-overlay-close');
        closeOverlay(type);
      });
    });
    
    // Close overlays when clicking backdrop
    document.querySelectorAll('[data-overlay-backdrop]').forEach(backdrop => {
      backdrop.addEventListener('click', (e) => {
        const type = backdrop.getAttribute('data-overlay-backdrop');
        closeOverlay(type);
      });
    });
    
    // Close overlays with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeAllOverlays();
      }
    });
  }
  
  // Contact form functionality
  function initContactForm() {
    const pageIndicator = document.querySelector('[data-current-page]');
    const pageCheckbox = document.querySelector('[data-page-specific]');
    const contactForm = document.querySelector('[data-contact-form]');
    const messageTextarea = document.querySelector('#contact-message');
    
    // Get current page information
    const currentPath = window.location.pathname;
    const pageName = currentPath === '/' ? 'Home' : 
                    currentPath.replace(/^\//, '').replace(/\/$/, '').split('/').pop() || 'Current Page';
    
    // Set page indicator text
    if (pageIndicator) {
      pageIndicator.textContent = `📄 ${pageName}`;
    }
    
    // Handle page-specific checkbox
    if (pageCheckbox && messageTextarea) {
      pageCheckbox.addEventListener('change', () => {
        if (pageCheckbox.checked) {
          // Add page information to message
          const currentMessage = messageTextarea.value.trim();
          const pageInfo = `\n\n--- Page Information ---\nPage: ${pageName}\nURL: ${window.location.href}\nUser Agent: ${navigator.userAgent}\nTimestamp: ${new Date().toISOString()}`;
          
          if (!currentMessage.includes('--- Page Information ---')) {
            messageTextarea.value = currentMessage + pageInfo;
          }
        } else {
          // Remove page information from message
          const currentMessage = messageTextarea.value;
          const pageInfoIndex = currentMessage.indexOf('\n\n--- Page Information ---');
          if (pageInfoIndex > -1) {
            messageTextarea.value = currentMessage.substring(0, pageInfoIndex);
          }
        }
      });
    }
    
    // Handle form submission
    if (contactForm) {
      contactForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const submitBtn = contactForm.querySelector('.contact-submit-btn');
        const originalText = submitBtn.innerHTML;
        
        // Show loading state
        submitBtn.innerHTML = `
          <svg class="submit-icon animate-spin" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
          Sending...
        `;
        submitBtn.disabled = true;
        
        try {
          // Get form data
          const formData = new FormData(contactForm);
          
          // Here you would typically send the data to your backend
          // For now, we'll simulate a successful submission
          await new Promise(resolve => setTimeout(resolve, 2000));
          
          // Show success state
          submitBtn.innerHTML = `
            <svg class="submit-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            Message Sent!
          `;
          
          // Reset form after success
          setTimeout(() => {
            contactForm.reset();
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
            // Close the overlay after successful submission
            closeOverlay('email');
          }, 2000);
          
        } catch (error) {
          console.error('Error sending message:', error);
          
          // Show error state
          submitBtn.innerHTML = `
            <svg class="submit-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
            Try Again
          `;
          
          setTimeout(() => {
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
          }, 3000);
        }
      });
    }
  }
  
  // Initialize bottom nav
  initBottomNav();
</script>